let pokemonRepository=function(){let t=[];function e(){return t}function n(e){isPokemon(e)?t.push(e):console.log("One of the items was not a pokemon!")}let i=t=>{fetch(t.detailsUrl).then(function(t){return t.json()}).then(function(e){t.ButtonImgUrl=e.sprites.front_default;let n=document.createElement("li");n.classList.add("pokemon-list-item","col-12","col-md-6","col-xl-4","list-group-item"),n.setAttribute("id",t.name),document.querySelector("ul.pokemon-list").appendChild(n);let i=document.createElement("button");i.classList.add("btn-block","pokemon-button"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#pokemonModal"),l(i,t),n.appendChild(i);let o=document.createElement("div");o.classList.add("container-fluid","button-container"),i.appendChild(o);let a=document.createElement("div");a.classList.add("row","button-row"),o.appendChild(a);let r=document.createElement("div");r.classList.add("col-3","button-img-col"),a.appendChild(r);let s=document.createElement("div");s.classList.add("col-6","pokemon-button-text","align-middle"),s.innerText=capitalizeFirstChar(t.name),a.appendChild(s);let c=document.createElement("div");c.classList.add("col-3","empty-button-div"),a.appendChild(c);let d=document.createElement("img");d.setAttribute("src",t.ButtonImgUrl),d.classList.add("pokemon-button-img","align-middle"),r.appendChild(d)})};function o(t){a(t).then(function(){let e=document.querySelector(".modal-title"),n=document.querySelector(".modal-height"),i=document.querySelector(".modal-weight"),o=document.querySelector(".modal-types");document.querySelector(".modal-image").setAttribute("src",t.imageUrl),e.innerText=capitalizeFirstChar(t.name),n.innerText=t.height/10+" m",i.innerText=t.weight/10+" kg";let l="";t.types.forEach(function(t,e){0!=e&&(l+=", "),l+=capitalizeFirstChar(t.type.name)}),o.innerText=l,document.querySelector(".modal-abilities-description-row").innerText="",s(t)})}function l(t,e){t.addEventListener("click",function(){o(e)})}function a(t){return fetch(t.detailsUrl).then(function(t){return t.json()}).then(function(e){t.imageUrl=e.sprites.other.dream_world.front_default,t.height=e.height,t.weight=e.weight,t.types=e.types,t.abilities=e.abilities}).catch(function(t){console.error(t)})}function r(t){t.addEventListener("click",function(){document.querySelectorAll(".ability-description").forEach(function(t){t.classList.add("d-none")}),document.getElementById(`${t.innerText.toLowerCase()}-text`).classList.remove("d-none")})}function s(t){document.querySelector(".modal-abilities").innerText="";let e=[];t.abilities.forEach(t=>{e[0]=document.createElement("button"),e[0].classList.add("modal-ability-button"),e[0].innerText=capitalizeFirstChar(t.ability.name),r(e[0],t.ability.name),document.querySelector(".modal-abilities").appendChild(e[0]);let n=document.createElement("div");n.classList.add("col","offset-3","col-9","ability-description","d-none"),n.setAttribute("id",`${t.ability.name}-text`),fetch(t.ability.url).then(function(t){return t.json()}).then(function(t){t.effect_entries.forEach(function(t){"en"==t.language.name&&(n.innerText=t.short_effect)}),document.querySelector(".modal-abilities-description-row").appendChild(n)}).catch(function(){return"Could not retrieve ability details!"})})}let c=document.getElementById("pokemon-search");return c.addEventListener("keyup",function(){document.querySelectorAll(".pokemon-list-item").forEach(function(t){t.classList.add("d-none"),t.id.startsWith(c.value.toLowerCase())&&t.classList.remove("d-none")})}),{add:n,getAll:e,addListItem:i,showDetails:o,addPokemonButtonEvent:l,loadList:function t(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=600").then(function(t){return t.json()}).then(function(t){t.results.forEach(function(t){n({name:t.name,detailsUrl:t.url})})}).catch(function(t){console.error(t)})},loadDetails:a,abilityButtonEvent:r,showAbilities:s}}();function isPokemon(t){let e=["name","detailsUrl"],n=["string","string"];return"object"==typeof t&&"name,detailsUrl"===Object.keys(t).toString()&&(Object.keys(t).forEach(function(i,o){return i===e[o]&&typeof t[i]===n[o]&&void 0}),!0)}function capitalizeFirstChar(t){return t.charAt(0).toUpperCase()+t.slice(1)}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});